<html>
<body>

<hr />
  ContactInfo API
  <br>
  測試主機位置 : 
  <input type="radio" name="Host" value="localhost" checked> localhost <br>
  交易方式 : 
  <input type="radio" name="ContactInfoType" value="Query" checked> Query
<hr />

<div id="divQuery">
<h3>Query</h3>
<form method="post"> 
  ContactInfoID : <input type="text" id="ContactInfoID" name="ContactInfoID" value="" /><br/>
  Sign-Key : <input type="text" id="SignKey1" name="SignKey" value="7F85C629D6D14D37A7635A50CC89DA12" /><br/>
  <input type="hidden" id="Sign1" name="Sign"/>
  <br>
  <input type="submit" name="name" value="Query(查詢)" onclick="SignCalc('Query');" />
</form>
</div>

</body>

<script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/js-sha256/0.3.2/sha256.min.js"></script>
<script type="text/javascript">

// Shorthand for $( document ).ready()
$(function() {

	var urlLocal="https://localhost:44375/API/";
	
	//Set form action URL
	$('form').submit(function(){
		
		var strHost = $('input[name="Host"]:checked').val();
		var strContactInfoType = $('input[name="ContactInfoType"]:checked').val();
		
		var url = "";
		switch (strHost)
		{
			case "localhost":
				{
					url = urlLocal + "ContactInfo/" + strContactInfoType;
				}
				break;
		}
		//alert(url);
 		
		$('form').attr('action', url);
	});

	//Set div show or hide
    $('input[type=radio][name=ContactInfoType]').change(function() {
	
		$("#divQuery").hide();
		
		if (this.value == 'Query') {
            $("#divQuery").show();
        }
    });

});

function SignCalc(Type) {
	var signStr = "";
	
	switch(Type)
	{
		case "Query":
			signStr = $("#SignKey1").val() + "&ContactInfoID=" + $("#ContactInfoID").val() + "&" + $("#SignKey1").val();
			break;
	}
	//alert(signStr);
		
	var res = sha256(signStr).toUpperCase();
	//alert(res);
	
	switch(Type)
	{
		case "Query":
			$("#Sign1").val(res);
			break;
	}	
}

</script>

</html>